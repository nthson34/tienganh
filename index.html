<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>English Speaking for Kids</title>

<!-- FONT Dá»„ Äá»ŒC CHO TRáºº -->
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#FF6B6B;
  --secondary:#4ECDC4;
  --bg:#F7FFF7;
}
body{
  margin:0;
  padding:16px;
  font-family:'Nunito', system-ui, sans-serif;
  background:var(--bg);
}
.container{
  max-width:560px;
  margin:auto;
  background:#fff;
  border-radius:28px;
  padding:22px;
  border:4px solid var(--secondary);
  box-shadow:0 12px 30px rgba(0,0,0,.12);
}
h1{
  text-align:center;
  color:var(--primary);
  font-size:28px;
}
.note{
  text-align:center;
  font-size:16px;
  color:#555;
  margin-bottom:8px;
}
select{
  width:100%;
  padding:12px;
  border-radius:14px;
  font-size:18px;
  margin:12px 0;
}
.speed-box{
  margin:10px 0 16px;
  padding:12px;
  border-radius:16px;
  background:#F1FDFB;
  border:2px dashed var(--secondary);
}
.speed-label{
  font-size:16px;
  font-weight:800;
  text-align:center;
}
.speed-value{
  text-align:center;
  font-size:15px;
  margin-top:4px;
}
input[type=range]{ width:100%; }

.card{
  margin-top:16px;
  padding:20px;
  border-radius:22px;
  border:2px solid #eee;
}
.question{
  font-size:24px;
  font-weight:800;
  line-height:1.4;
}
.answer{
  display:none;
  margin-top:14px;
  padding-top:12px;
  border-top:1px dashed #ccc;
  color:#2E7D32;
  font-size:22px;
  font-weight:700;
  line-height:1.5;
  white-space:pre-line;
}
.buttons,.nav{
  display:flex;
  gap:12px;
  margin-top:16px;
  flex-wrap:wrap;
}
.btn{
  flex:1;
  border:none;
  padding:14px;
  border-radius:16px;
  font-size:18px;
  font-weight:800;
}
.listen{background:#FFD93D;}
.listenAnswer{background:#4FC3F7;color:white;}
.show{background:#6BCB77;color:white;}
.prev{background:#B0BEC5;}
.next{background:#FF6B6B;color:white;}
</style>
</head>

<body>

<div class="container">
<h1>ğŸˆ English Speaking</h1>
<div class="note">Nghe tá»«ng chá»¯ â€“ phÃ¡t Ã¢m Ä‘Ãºng</div>

<select id="unitSelect"></select>

<!-- THANH CHá»ˆNH Tá»C Äá»˜ -->
<div class="speed-box">
  <div class="speed-label">ğŸšï¸ Tá»‘c Ä‘á»™ Ä‘á»c</div>
  <input type="range" id="speed" min="0.35" max="0.65" step="0.05" value="0.45">
  <div class="speed-value" id="speedText">Cháº­m (0.45)</div>
</div>

<div class="card">
  <div class="question" id="question"></div>

  <div class="buttons">
    <button class="btn listen" onclick="speakQuestion()">ğŸ”Š Nghe cÃ¢u há»i</button>
    <button class="btn listenAnswer" onclick="speakAnswer()">ğŸ”Š Nghe Ä‘Ã¡p Ã¡n</button>
    <button class="btn show" onclick="toggle()">ğŸ‘€ Xem Ä‘Ã¡p Ã¡n</button>
  </div>

  <div class="answer" id="answer"></div>
</div>

<div class="nav">
  <button class="btn prev" onclick="prev()">â¬…ï¸ TrÆ°á»›c</button>
  <button class="btn next" onclick="next()">â¡ï¸ Tiáº¿p</button>
</div>
</div>

<script>
// ==================
// Dá»® LIá»†U â€“ ÄÃšNG Bá»˜ CÃ‚U Há»I Cá»¦A Báº N
// ==================
const data = [
{
  name:"Unit 1: My Friend",
  q:[
    ["How do you spell your name?","Itâ€™s V â€“ I."],
    ["Where are you from?","Iâ€™m from Viet Nam."],
    ["Do your friends like dancing?","Yes, they do."]
  ]
},
{
  name:"Unit 2: Family",
  q:[
    ["Who is this?","This is my mother."],
    ["Whatâ€™s her name?","Her name is Chi."],
    ["Do you have a pet?","Yes, I do. I have a cat."]
  ]
},
{
  name:"Unit 3: School",
  q:[
    ["Is this your book?","Yes, it is."],
    ["Are these your pens?","Yes, they are."],
    ["Do you like English?","Yes, I do."],
    ["When do you have English?","I have English on Monday."]
  ]
},
{
  name:"Unit 4: Home",
  q:[
    ["Whereâ€™s your dad?","He is in the bedroom."],
    ["Whatâ€™s he doing?","He is watching TV."],
    ["Who do you live with?","I live with mom and dad."],
    ["How many rooms are there in your house?","There are tow rooms."]
  ]
}
];

// ==================
// LÃ€M Sáº CH CÃ‚U â€“ Bá» Dáº¤U CÃ‚U
// ==================
function cleanText(text){
  return text
    .replace(/[.,?!â€™'"]/g,"")
    .replace(/â€“|-/g," ")
    .replace(/\(|\)/g,"")
    .replace(/\s+/g," ")
    .trim();
}

// ==================
// GIá»ŒNG + Tá»C Äá»˜
// ==================
let voices=[], selectedVoice=null;
let speed = 0.45;

const speedSlider=document.getElementById("speed");
const speedText=document.getElementById("speedText");

speedSlider.oninput=()=>{
  speed=parseFloat(speedSlider.value);
  let label = speed<0.4 ? "Ráº¥t cháº­m" : speed<0.55 ? "Cháº­m" : "BÃ¬nh thÆ°á»ng";
  speedText.textContent = `${label} (${speed})`;
};

function loadVoices(){
  voices = speechSynthesis.getVoices();
  selectedVoice =
    voices.find(v=>v.lang.startsWith("en-SG")) ||
    voices.find(v=>v.lang.startsWith("en-IN")) ||
    voices.find(v=>v.lang.startsWith("en-US")) ||
    voices[0];
}
speechSynthesis.onvoiceschanged = loadVoices;

// ==================
// Äá»ŒC RÃ• Tá»ªNG Tá»ª â€“ KHÃ”NG NHáº¤N NHÃ
// ==================
function speakClearWords(text){
  speechSynthesis.cancel();
  const clean = cleanText(text);
  const words = clean.split(" ");
  let index=0;

  function speakNext(){
    if(index>=words.length) return;
    const u=new SpeechSynthesisUtterance(words[index]);
    u.lang="en";
    u.rate=speed;
    u.pitch=1.0;
    if(selectedVoice) u.voice=selectedVoice;
    u.onend=()=>{ index++; setTimeout(speakNext,350); };
    speechSynthesis.speak(u);
  }
  speakNext();
}

// ==================
// APP LOGIC
// ==================
let u=0,i=0;
const unitSelect=document.getElementById("unitSelect");
const questionEl=document.getElementById("question");
const answerEl=document.getElementById("answer");

data.forEach((unit,idx)=>{
  unitSelect.innerHTML+=`<option value="${idx}">${unit.name}</option>`;
});

unitSelect.onchange=()=>{u=unitSelect.value;i=0;render();};

function render(){
  questionEl.textContent="ğŸ”Š "+data[u].q[i][0];
  answerEl.textContent=data[u].q[i][1];
  answerEl.style.display="none";
}

function speakQuestion(){ speakClearWords(data[u].q[i][0]); }
function speakAnswer(){ speakClearWords(data[u].q[i][1]); }

function toggle(){
  answerEl.style.display = answerEl.style.display==="block"?"none":"block";
}
function next(){ if(i<data[u].q.length-1)i++; render(); }
function prev(){ if(i>0)i--; render(); }

render();
</script>

</body>
</html>
